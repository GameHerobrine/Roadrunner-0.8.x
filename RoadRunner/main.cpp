#include <config.hpp>
#include <server.hpp>
#include <nbt/tag_utils.hpp>
#include <nbt/tag/compound.hpp>

#include <nbt/tag_identifiers.hpp>
using RoadRunner::Server;
unsigned char buffer[] = {10, 0, 0, 3, 8, 0, 71, 97, 109, 101, 84, 121, 112, 101, 0, 0, 0, 0, 4, 10, 0, 76, 97, 115, 116, 80, 108, 97, 121, 101, 100, 225, 124, 107, 83, 0, 0, 0, 0, 8, 9, 0, 76, 101, 118, 101, 108, 78, 97, 109, 101, 4, 0, 106, 117, 115, 116, 3, 8, 0, 80, 108, 97, 116, 102, 111, 114, 109, 2, 0, 0, 0, 10, 6, 0, 80, 108, 97, 121, 101, 114, 2, 3, 0, 65, 105, 114, 44, 1, 9, 5, 0, 65, 114, 109, 111, 114, 10, 4, 0, 0, 0, 1, 5, 0, 67, 111, 117, 110, 116, 1, 2, 6, 0, 68, 97, 109, 97, 103, 101, 49, 0, 2, 2, 0, 105, 100, 50, 1, 0, 1, 5, 0, 67, 111, 117, 110, 116, 1, 2, 6, 0, 68, 97, 109, 97, 103, 101, 49, 0, 2, 2, 0, 105, 100, 51, 1, 0, 1, 5, 0, 67, 111, 117, 110, 116, 1, 2, 6, 0, 68, 97, 109, 97, 103, 101, 49, 0, 2, 2, 0, 105, 100, 52, 1, 0, 1, 5, 0, 67, 111, 117, 110, 116, 1, 2, 6, 0, 68, 97, 109, 97, 103, 101, 49, 0, 2, 2, 0, 105, 100, 53, 1, 0, 2, 10, 0, 65, 116, 116, 97, 99, 107, 84, 105, 109, 101, 0, 0, 3, 12, 0, 66, 101, 100, 80, 111, 115, 105, 116, 105, 111, 110, 88, 75, 0, 0, 0, 3, 12, 0, 66, 101, 100, 80, 111, 115, 105, 116, 105, 111, 110, 89, 77, 0, 0, 0, 3, 12, 0, 66, 101, 100, 80, 111, 115, 105, 116, 105, 111, 110, 90, 249, 0, 0, 0, 2, 9, 0, 68, 101, 97, 116, 104, 84, 105, 109, 101, 0, 0, 3, 9, 0, 68, 105, 109, 101, 110, 115, 105, 111, 110, 0, 0, 0, 0, 5, 12, 0, 70, 97, 108, 108, 68, 105, 115, 116, 97, 110, 99, 101, 0, 0, 0, 0, 2, 4, 0, 70, 105, 114, 101, 236, 255, 2, 6, 0, 72, 101, 97, 108, 116, 104, 20, 0, 2, 8, 0, 72, 117, 114, 116, 84, 105, 109, 101, 0, 0, 9, 9, 0, 73, 110, 118, 101, 110, 116, 111, 114, 121, 10, 20, 0, 0, 0, 1, 5, 0, 67, 111, 117, 110, 116, 255, 2, 6, 0, 68, 97, 109, 97, 103, 101, 27, 0, 1, 4, 0, 83, 108, 111, 116, 0, 2, 2, 0, 105, 100, 255, 0, 0, 1, 5, 0, 67, 111, 117, 110, 116, 255, 2, 6, 0, 68, 97, 109, 97, 103, 101, 9, 0, 1, 4, 0, 83, 108, 111, 116, 1, 2, 2, 0, 105, 100, 255, 0, 0, 1, 5, 0, 67, 111, 117, 110, 116, 255, 2, 6, 0, 68, 97, 109, 97, 103, 101, 28, 0, 1, 4, 0, 83, 108, 111, 116, 2, 2, 2, 0, 105, 100, 255, 0, 0, 1, 5, 0, 67, 111, 117, 110, 116, 255, 2, 6, 0, 68, 97, 109, 97, 103, 101, 18, 0, 1, 4, 0, 83, 108, 111, 116, 3, 2, 2, 0, 105, 100, 255, 0, 0, 1, 5, 0, 67, 111, 117, 110, 116, 255, 2, 6, 0, 68, 97, 109, 97, 103, 101, 23, 0, 1, 4, 0, 83, 108, 111, 116, 4, 2, 2, 0, 105, 100, 255, 0, 0, 1, 5, 0, 67, 111, 117, 110, 116, 255, 2, 6, 0, 68, 97, 109, 97, 103, 101, 16, 0, 1, 4, 0, 83, 108, 111, 116, 5, 2, 2, 0, 105, 100, 255, 0, 0, 1, 5, 0, 67, 111, 117, 110, 116, 255, 2, 6, 0, 68, 97, 109, 97, 103, 101, 26, 0, 1, 4, 0, 83, 108, 111, 116, 6, 2, 2, 0, 105, 100, 255, 0, 0, 1, 5, 0, 67, 111, 117, 110, 116, 255, 2, 6, 0, 68, 97, 109, 97, 103, 101, 16, 0, 1, 4, 0, 83, 108, 111, 116, 7, 2, 2, 0, 105, 100, 255, 0, 0, 1, 5, 0, 67, 111, 117, 110, 116, 255, 2, 6, 0, 68, 97, 109, 97, 103, 101, 3, 0, 1, 4, 0, 83, 108, 111, 116, 8, 2, 2, 0, 105, 100, 255, 0, 0, 1, 5, 0, 67, 111, 117, 110, 116, 10, 2, 6, 0, 68, 97, 109, 97, 103, 101, 0, 0, 1, 4, 0, 83, 108, 111, 116, 9, 2, 2, 0, 105, 100, 31, 1, 0, 1, 5, 0, 67, 111, 117, 110, 116, 4, 2, 6, 0, 68, 97, 109, 97, 103, 101, 0, 0, 1, 4, 0, 83, 108, 111, 116, 10, 2, 2, 0, 105, 100, 96, 1, 0, 1, 5, 0, 67, 111, 117, 110, 116, 1, 2, 6, 0, 68, 97, 109, 97, 103, 101, 0, 0, 1, 4, 0, 83, 108, 111, 116, 11, 2, 2, 0, 105, 100, 97, 1, 0, 1, 5, 0, 67, 111, 117, 110, 116, 11, 2, 6, 0, 68, 97, 109, 97, 103, 101, 15, 0, 1, 4, 0, 83, 108, 111, 116, 12, 2, 2, 0, 105, 100, 95, 1, 0, 1, 5, 0, 67, 111, 117, 110, 116, 1, 2, 6, 0, 68, 97, 109, 97, 103, 101, 0, 0, 1, 4, 0, 83, 108, 111, 116, 13, 2, 2, 0, 105, 100, 135, 1, 0, 1, 5, 0, 67, 111, 117, 110, 116, 36, 2, 6, 0, 68, 97, 109, 97, 103, 101, 0, 0, 1, 4, 0, 83, 108, 111, 116, 16, 2, 2, 0, 105, 100, 40, 1, 0, 1, 5, 0, 67, 111, 117, 110, 116, 59, 2, 6, 0, 68, 97, 109, 97, 103, 101, 0, 0, 1, 4, 0, 83, 108, 111, 116, 18, 2, 2, 0, 105, 100, 85, 0, 0, 1, 5, 0, 67, 111, 117, 110, 116, 5, 2, 6, 0, 68, 97, 109, 97, 103, 101, 0, 0, 1, 4, 0, 83, 108, 111, 116, 23, 2, 2, 0, 105, 100, 32, 1, 0, 1, 5, 0, 67, 111, 117, 110, 116, 20, 2, 6, 0, 68, 97, 109, 97, 103, 101, 0, 0, 1, 4, 0, 83, 108, 111, 116, 26, 2, 2, 0, 105, 100, 108, 1, 0, 1, 5, 0, 67, 111, 117, 110, 116, 9, 2, 6, 0, 68, 97, 109, 97, 103, 101, 0, 0, 1, 4, 0, 83, 108, 111, 116, 27, 2, 2, 0, 105, 100, 6, 1, 0, 1, 5, 0, 67, 111, 117, 110, 116, 6, 2, 6, 0, 68, 97, 109, 97, 103, 101, 0, 0, 1, 4, 0, 83, 108, 111, 116, 28, 2, 2, 0, 105, 100, 33, 1, 0, 9, 6, 0, 77, 111, 116, 105, 111, 110, 5, 3, 0, 0, 0, 1, 0, 0, 128, 46, 144, 160, 189, 1, 0, 0, 0, 1, 8, 0, 79, 110, 71, 114, 111, 117, 110, 100, 1, 9, 3, 0, 80, 111, 115, 5, 3, 0, 0, 0, 107, 205, 150, 66, 113, 61, 147, 66, 93, 248, 112, 67, 9, 8, 0, 82, 111, 116, 97, 116, 105, 111, 110, 5, 2, 0, 0, 0, 59, 175, 199, 69, 52, 203, 103, 66, 3, 5, 0, 83, 99, 111, 114, 101, 0, 0, 0, 0, 2, 10, 0, 83, 108, 101, 101, 112, 84, 105, 109, 101, 114, 0, 0, 1, 8, 0, 83, 108, 101, 101, 112, 105, 110, 103, 0, 3, 6, 0, 83, 112, 97, 119, 110, 88, 73, 0, 0, 0, 3, 6, 0, 83, 112, 97, 119, 110, 89, 77, 0, 0, 0, 3, 6, 0, 83, 112, 97, 119, 110, 90, 248, 0, 0, 0, 10, 9, 0, 97, 98, 105, 108, 105, 116, 105, 101, 115, 1, 6, 0, 102, 108, 121, 105, 110, 103, 0, 1, 10, 0, 105, 110, 115, 116, 97, 98, 117, 105, 108, 100, 0, 1, 12, 0, 105, 110, 118, 117, 108, 110, 101, 114, 97, 98, 108, 101, 0, 1, 6, 0, 109, 97, 121, 102, 108, 121, 0, 0, 0, 4, 10, 0, 82, 97, 110, 100, 111, 109, 83, 101, 101, 100, 253, 168, 12, 6, 0, 0, 0, 0, 4, 10, 0, 83, 105, 122, 101, 79, 110, 68, 105, 115, 107, 0, 0, 0, 0, 0, 0, 0, 0, 3, 6, 0, 83, 112, 97, 119, 110, 88, 71, 0, 0, 0, 3, 6, 0, 83, 112, 97, 119, 110, 89, 74, 0, 0, 0, 3, 6, 0, 83, 112, 97, 119, 110, 90, 250, 0, 0, 0, 3, 14, 0, 83, 116, 111, 114, 97, 103, 101, 86, 101, 114, 115, 105, 111, 110, 3, 0, 0, 0, 4, 4, 0, 84, 105, 109, 101, 253, 75, 1, 0, 0, 0, 0, 0, 4, 16, 0, 100, 97, 121, 67, 121, 99, 108, 101, 83, 116, 111, 112, 84, 105, 109, 101, 255, 255, 255, 255, 255, 255, 255, 255, 1, 9, 0, 115, 112, 97, 119, 110, 77, 111, 98, 115, 1, 0};

int main(int argc, char** argv) {
    if(argc == 2){
        printf("Running nbt test\n");
        size_t buflen = sizeof(buffer);

        RakNet::BitStream stream(buffer, buflen, 1);
        RoadRunner::nbt::tag::Compound* tag12121212 = (RoadRunner::nbt::tag::Compound*) create_tag(RoadRunner::nbt::TagIdentifiers::COMPOUND);
        tag12121212->read(&stream);
        print_tag(tag12121212);
        return 0;
    }

    Server *server = new Server(19132, MAX_CLIENTS);
}
